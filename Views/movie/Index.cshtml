@model IEnumerable<EventManager.Models.Movie>

@{
    ViewData["Title"] = "Phim Hot";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="fw-bold" style="color:#ff4dd2;">🎬 Phim Hot</h2>
        <p class="text-muted">Các bộ phim đang được yêu thích</p>
    </div>

    @if (User.IsInRole("Admin") || User.IsInRole("Staff"))
    {
        <a class="btn btn-success fw-bold" asp-action="Create">➕ Thêm phim</a>
    }
</div>

<div class="row g-4">
    @foreach (var movie in Model)
    {
        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 shadow-lg border-0" style="border-radius:12px; overflow:hidden;">
                <div style="height:320px; background-size:cover; background-position:center; background-image:url('@(String.IsNullOrEmpty(movie.PosterUrl) ? Url.Content("~/images/no-image.png") : movie.PosterUrl)');"></div>

                <div class="card-body">
                    <h5 class="fw-bold" style="color:#ff4dd2;">@movie.Title</h5>
                    <p class="small text-muted mb-1">⭐ <strong>@movie.Rating.ToString("0.0")</strong> / 10 • @movie.ReleaseDate?.Year</p>
                    <p class="small text-truncate" title="@movie.Description">@movie.Description</p>

                    <div class="mt-3 d-flex justify-content-between align-items-center">
                        <a asp-action="Details" asp-route-id="@movie.Id" class="btn btn-outline-primary btn-sm">Xem chi tiết</a>

                        <div>
                            @if (User.IsInRole("Admin") || User.IsInRole("Staff"))
                            {
                                <a asp-action="Edit" asp-route-id="@movie.Id" class="btn btn-warning btn-sm me-1">Sửa</a>
                                <a asp-action="Delete" asp-route-id="@movie.Id" class="btn btn-danger btn-sm">Xóa</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
